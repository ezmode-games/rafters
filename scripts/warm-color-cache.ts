/**
 * Warm the Rafters Color API cache with popular color palettes
 *
 * This script queues all Tailwind v4 colors plus commonly used colors
 * to pre-generate intelligence data for instant responses.
 *
 * Usage: pnpm tsx scripts/warm-color-cache.ts
 */

// Tailwind v4 OKLCH colors - extracted from theme.css
// Format: oklch(L% C H) -> { l: L/100, c: C, h: H }
const TAILWIND_COLORS: Record<string, Array<{ l: number; c: number; h: number }>> = {
  red: [
    { l: 0.971, c: 0.013, h: 17.38 },
    { l: 0.936, c: 0.032, h: 17.717 },
    { l: 0.885, c: 0.062, h: 18.334 },
    { l: 0.808, c: 0.114, h: 19.571 },
    { l: 0.704, c: 0.191, h: 22.216 },
    { l: 0.637, c: 0.237, h: 25.331 },
    { l: 0.577, c: 0.245, h: 27.325 },
    { l: 0.505, c: 0.213, h: 27.518 },
    { l: 0.444, c: 0.177, h: 26.899 },
    { l: 0.396, c: 0.141, h: 25.723 },
    { l: 0.258, c: 0.092, h: 26.042 },
  ],
  orange: [
    { l: 0.98, c: 0.016, h: 73.684 },
    { l: 0.954, c: 0.038, h: 75.164 },
    { l: 0.901, c: 0.076, h: 70.697 },
    { l: 0.837, c: 0.128, h: 66.29 },
    { l: 0.75, c: 0.183, h: 55.934 },
    { l: 0.705, c: 0.213, h: 47.604 },
    { l: 0.646, c: 0.222, h: 41.116 },
    { l: 0.553, c: 0.195, h: 38.402 },
    { l: 0.47, c: 0.157, h: 37.304 },
    { l: 0.408, c: 0.123, h: 38.172 },
    { l: 0.266, c: 0.079, h: 36.259 },
  ],
  amber: [
    { l: 0.987, c: 0.022, h: 95.277 },
    { l: 0.962, c: 0.059, h: 95.617 },
    { l: 0.924, c: 0.12, h: 95.746 },
    { l: 0.879, c: 0.169, h: 91.605 },
    { l: 0.828, c: 0.189, h: 84.429 },
    { l: 0.769, c: 0.188, h: 70.08 },
    { l: 0.666, c: 0.179, h: 58.318 },
    { l: 0.555, c: 0.163, h: 48.998 },
    { l: 0.473, c: 0.137, h: 46.201 },
    { l: 0.414, c: 0.112, h: 45.904 },
    { l: 0.279, c: 0.077, h: 45.635 },
  ],
  yellow: [
    { l: 0.987, c: 0.026, h: 102.212 },
    { l: 0.973, c: 0.071, h: 103.193 },
    { l: 0.945, c: 0.129, h: 101.54 },
    { l: 0.905, c: 0.182, h: 98.111 },
    { l: 0.852, c: 0.199, h: 91.936 },
    { l: 0.795, c: 0.184, h: 86.047 },
    { l: 0.681, c: 0.162, h: 75.834 },
    { l: 0.554, c: 0.135, h: 66.442 },
    { l: 0.476, c: 0.114, h: 61.907 },
    { l: 0.421, c: 0.095, h: 57.708 },
    { l: 0.286, c: 0.066, h: 53.813 },
  ],
  lime: [
    { l: 0.986, c: 0.031, h: 120.757 },
    { l: 0.967, c: 0.067, h: 122.328 },
    { l: 0.938, c: 0.127, h: 124.321 },
    { l: 0.897, c: 0.196, h: 126.665 },
    { l: 0.841, c: 0.238, h: 128.85 },
    { l: 0.768, c: 0.233, h: 130.85 },
    { l: 0.648, c: 0.2, h: 131.684 },
    { l: 0.532, c: 0.157, h: 131.589 },
    { l: 0.453, c: 0.124, h: 130.933 },
    { l: 0.405, c: 0.101, h: 131.063 },
    { l: 0.274, c: 0.072, h: 132.109 },
  ],
  green: [
    { l: 0.982, c: 0.018, h: 155.826 },
    { l: 0.962, c: 0.044, h: 156.743 },
    { l: 0.925, c: 0.084, h: 155.995 },
    { l: 0.871, c: 0.15, h: 154.449 },
    { l: 0.792, c: 0.209, h: 151.711 },
    { l: 0.723, c: 0.219, h: 149.579 },
    { l: 0.627, c: 0.194, h: 149.214 },
    { l: 0.527, c: 0.154, h: 150.069 },
    { l: 0.448, c: 0.119, h: 151.328 },
    { l: 0.393, c: 0.095, h: 152.535 },
    { l: 0.266, c: 0.065, h: 152.934 },
  ],
  emerald: [
    { l: 0.979, c: 0.021, h: 166.113 },
    { l: 0.95, c: 0.052, h: 163.051 },
    { l: 0.905, c: 0.093, h: 164.15 },
    { l: 0.845, c: 0.143, h: 164.978 },
    { l: 0.765, c: 0.177, h: 163.223 },
    { l: 0.696, c: 0.17, h: 162.48 },
    { l: 0.596, c: 0.145, h: 163.225 },
    { l: 0.508, c: 0.118, h: 165.612 },
    { l: 0.432, c: 0.095, h: 166.913 },
    { l: 0.378, c: 0.077, h: 168.94 },
    { l: 0.262, c: 0.051, h: 172.552 },
  ],
  teal: [
    { l: 0.984, c: 0.014, h: 180.72 },
    { l: 0.953, c: 0.051, h: 180.801 },
    { l: 0.91, c: 0.096, h: 180.426 },
    { l: 0.855, c: 0.138, h: 181.071 },
    { l: 0.777, c: 0.152, h: 181.912 },
    { l: 0.704, c: 0.14, h: 182.503 },
    { l: 0.6, c: 0.118, h: 184.704 },
    { l: 0.511, c: 0.096, h: 186.391 },
    { l: 0.437, c: 0.078, h: 188.216 },
    { l: 0.386, c: 0.063, h: 188.416 },
    { l: 0.277, c: 0.046, h: 192.524 },
  ],
  cyan: [
    { l: 0.984, c: 0.019, h: 200.873 },
    { l: 0.956, c: 0.045, h: 203.388 },
    { l: 0.917, c: 0.08, h: 205.041 },
    { l: 0.865, c: 0.127, h: 207.078 },
    { l: 0.789, c: 0.154, h: 211.53 },
    { l: 0.715, c: 0.143, h: 215.221 },
    { l: 0.609, c: 0.126, h: 221.723 },
    { l: 0.52, c: 0.105, h: 223.128 },
    { l: 0.45, c: 0.085, h: 224.283 },
    { l: 0.398, c: 0.07, h: 227.392 },
    { l: 0.302, c: 0.056, h: 229.695 },
  ],
  sky: [
    { l: 0.977, c: 0.013, h: 236.62 },
    { l: 0.951, c: 0.026, h: 236.824 },
    { l: 0.901, c: 0.058, h: 230.902 },
    { l: 0.828, c: 0.111, h: 230.318 },
    { l: 0.746, c: 0.16, h: 232.661 },
    { l: 0.685, c: 0.169, h: 237.323 },
    { l: 0.588, c: 0.158, h: 241.966 },
    { l: 0.5, c: 0.134, h: 242.749 },
    { l: 0.443, c: 0.11, h: 240.79 },
    { l: 0.391, c: 0.09, h: 240.876 },
    { l: 0.293, c: 0.066, h: 243.157 },
  ],
  blue: [
    { l: 0.97, c: 0.014, h: 254.604 },
    { l: 0.932, c: 0.032, h: 255.585 },
    { l: 0.882, c: 0.059, h: 254.128 },
    { l: 0.809, c: 0.105, h: 251.813 },
    { l: Math.SQRT1_2, c: 0.165, h: 254.624 },
    { l: 0.623, c: 0.214, h: 259.815 },
    { l: 0.546, c: 0.245, h: 262.881 },
    { l: 0.488, c: 0.243, h: 264.376 },
    { l: 0.424, c: 0.199, h: 265.638 },
    { l: 0.379, c: 0.146, h: 265.522 },
    { l: 0.282, c: 0.091, h: 267.935 },
  ],
  indigo: [
    { l: 0.962, c: 0.018, h: 272.314 },
    { l: 0.93, c: 0.034, h: 272.788 },
    { l: 0.87, c: 0.065, h: 274.039 },
    { l: 0.785, c: 0.115, h: 274.713 },
    { l: 0.673, c: 0.182, h: 276.935 },
    { l: 0.585, c: 0.233, h: 277.117 },
    { l: 0.511, c: 0.262, h: 276.966 },
    { l: 0.457, c: 0.24, h: 277.023 },
    { l: 0.398, c: 0.195, h: 277.366 },
    { l: 0.359, c: 0.144, h: 278.697 },
    { l: 0.257, c: 0.09, h: 281.288 },
  ],
  violet: [
    { l: 0.969, c: 0.016, h: 293.756 },
    { l: 0.943, c: 0.029, h: 294.588 },
    { l: 0.894, c: 0.057, h: 293.283 },
    { l: 0.811, c: 0.111, h: 293.571 },
    { l: 0.702, c: 0.183, h: 293.541 },
    { l: 0.606, c: 0.25, h: 292.717 },
    { l: 0.541, c: 0.281, h: 293.009 },
    { l: 0.491, c: 0.27, h: 292.581 },
    { l: 0.432, c: 0.232, h: 292.759 },
    { l: 0.38, c: 0.189, h: 293.745 },
    { l: 0.283, c: 0.141, h: 291.089 },
  ],
  purple: [
    { l: 0.977, c: 0.014, h: 308.299 },
    { l: 0.946, c: 0.033, h: 307.174 },
    { l: 0.902, c: 0.063, h: 306.703 },
    { l: 0.827, c: 0.119, h: 306.383 },
    { l: 0.714, c: 0.203, h: 305.504 },
    { l: 0.627, c: 0.265, h: 303.9 },
    { l: 0.558, c: 0.288, h: 302.321 },
    { l: 0.496, c: 0.265, h: 301.924 },
    { l: 0.438, c: 0.218, h: 303.724 },
    { l: 0.381, c: 0.176, h: 304.987 },
    { l: 0.291, c: 0.149, h: 302.717 },
  ],
  fuchsia: [
    { l: 0.977, c: 0.017, h: 320.058 },
    { l: 0.952, c: 0.037, h: 318.852 },
    { l: 0.903, c: 0.076, h: 319.62 },
    { l: 0.833, c: 0.145, h: 321.434 },
    { l: 0.74, c: 0.238, h: 322.16 },
    { l: 0.667, c: 0.295, h: 322.15 },
    { l: 0.591, c: 0.293, h: 322.896 },
    { l: 0.518, c: 0.253, h: 323.949 },
    { l: 0.452, c: 0.211, h: 324.591 },
    { l: 0.401, c: 0.17, h: 325.612 },
    { l: 0.293, c: 0.136, h: 325.661 },
  ],
  pink: [
    { l: 0.971, c: 0.014, h: 343.198 },
    { l: 0.948, c: 0.028, h: 342.258 },
    { l: 0.899, c: 0.061, h: 343.231 },
    { l: 0.823, c: 0.12, h: 346.018 },
    { l: 0.718, c: 0.202, h: 349.761 },
    { l: 0.656, c: 0.241, h: 354.308 },
    { l: 0.592, c: 0.249, h: 0.584 },
    { l: 0.525, c: 0.223, h: 3.958 },
    { l: 0.459, c: 0.187, h: 3.815 },
    { l: 0.408, c: 0.153, h: 2.432 },
    { l: 0.284, c: 0.109, h: 3.907 },
  ],
  rose: [
    { l: 0.969, c: 0.015, h: 12.422 },
    { l: 0.941, c: 0.03, h: 12.58 },
    { l: 0.892, c: 0.058, h: 10.001 },
    { l: 0.81, c: 0.117, h: 11.638 },
    { l: 0.712, c: 0.194, h: 13.428 },
    { l: 0.645, c: 0.246, h: 16.439 },
    { l: 0.586, c: 0.253, h: 17.585 },
    { l: 0.514, c: 0.222, h: 16.935 },
    { l: 0.455, c: 0.188, h: 13.697 },
    { l: 0.41, c: 0.159, h: 10.272 },
    { l: 0.271, c: 0.105, h: 12.094 },
  ],
  slate: [
    { l: 0.984, c: 0.003, h: 247.858 },
    { l: 0.968, c: 0.007, h: 247.896 },
    { l: 0.929, c: 0.013, h: 255.508 },
    { l: 0.869, c: 0.022, h: 252.894 },
    { l: 0.704, c: 0.04, h: 256.788 },
    { l: 0.554, c: 0.046, h: 257.417 },
    { l: 0.446, c: 0.043, h: 257.281 },
    { l: 0.372, c: 0.044, h: 257.287 },
    { l: 0.279, c: 0.041, h: 260.031 },
    { l: 0.208, c: 0.042, h: 265.755 },
    { l: 0.129, c: 0.042, h: 264.695 },
  ],
  gray: [
    { l: 0.985, c: 0.002, h: 247.839 },
    { l: 0.967, c: 0.003, h: 264.542 },
    { l: 0.928, c: 0.006, h: 264.531 },
    { l: 0.872, c: 0.01, h: 258.338 },
    { l: Math.SQRT1_2, c: 0.022, h: 261.325 },
    { l: 0.551, c: 0.027, h: 264.364 },
    { l: 0.446, c: 0.03, h: 256.802 },
    { l: 0.373, c: 0.034, h: 259.733 },
    { l: 0.278, c: 0.033, h: 256.848 },
    { l: 0.21, c: 0.034, h: 264.665 },
    { l: 0.13, c: 0.028, h: 261.692 },
  ],
  zinc: [
    { l: 0.985, c: 0, h: 0 },
    { l: 0.967, c: 0.001, h: 286.375 },
    { l: 0.92, c: 0.004, h: 286.32 },
    { l: 0.871, c: 0.006, h: 286.286 },
    { l: 0.705, c: 0.015, h: 286.067 },
    { l: 0.552, c: 0.016, h: 285.938 },
    { l: 0.442, c: 0.017, h: 285.786 },
    { l: 0.37, c: 0.013, h: 285.805 },
    { l: 0.274, c: 0.006, h: 286.033 },
    { l: 0.21, c: 0.006, h: 285.885 },
    { l: 0.141, c: 0.005, h: 285.823 },
  ],
  neutral: [
    { l: 0.985, c: 0, h: 0 },
    { l: 0.97, c: 0, h: 0 },
    { l: 0.922, c: 0, h: 0 },
    { l: 0.87, c: 0, h: 0 },
    { l: 0.708, c: 0, h: 0 },
    { l: 0.556, c: 0, h: 0 },
    { l: 0.439, c: 0, h: 0 },
    { l: 0.371, c: 0, h: 0 },
    { l: 0.269, c: 0, h: 0 },
    { l: 0.205, c: 0, h: 0 },
    { l: 0.145, c: 0, h: 0 },
  ],
  stone: [
    { l: 0.985, c: 0.001, h: 106.423 },
    { l: 0.97, c: 0.001, h: 106.424 },
    { l: 0.923, c: 0.003, h: 48.717 },
    { l: 0.869, c: 0.005, h: 56.366 },
    { l: 0.709, c: 0.01, h: 56.259 },
    { l: 0.553, c: 0.013, h: 58.071 },
    { l: 0.444, c: 0.011, h: 73.639 },
    { l: 0.374, c: 0.01, h: 67.558 },
    { l: 0.268, c: 0.007, h: 34.298 },
    { l: 0.216, c: 0.006, h: 56.043 },
    { l: 0.147, c: 0.004, h: 49.25 },
  ],
};

// Rafters semantic colors (from our earlier discussion)
const RAFTERS_COLORS: Record<string, { l: number; c: number; h: number }> = {
  // neutral/primary - zinc-based (already in Tailwind)
  // accent - silver-true-glacier
  'rafters-accent': { l: 0.55, c: 0.12, h: 180 },
  // destructive - silver-bold-fire-truck
  'rafters-destructive': { l: 0.55, c: 0.2, h: 0 },
  // warning - silver-true-honey
  'rafters-warning': { l: 0.55, c: 0.12, h: 60 },
  // success - silver-true-citrine
  'rafters-success': { l: 0.55, c: 0.12, h: 90 },
  // info - silver-true-sky
  'rafters-info': { l: 0.55, c: 0.12, h: 210 },
  // highlight - silver-true-violet
  'rafters-highlight': { l: 0.55, c: 0.12, h: 270 },
};

// shadcn default color mappings use Tailwind colors, so no additional colors needed

async function warmCache() {
  const colors: Array<{ l: number; c: number; h: number; alpha?: number }> = [];

  // Add all Tailwind colors
  for (const [name, shades] of Object.entries(TAILWIND_COLORS)) {
    console.log(`Adding ${name}: ${shades.length} shades`);
    for (const shade of shades) {
      colors.push({ ...shade, alpha: 1 });
    }
  }

  // Add Rafters semantic colors
  for (const [name, color] of Object.entries(RAFTERS_COLORS)) {
    console.log(`Adding ${name}`);
    colors.push({ ...color, alpha: 1 });
  }

  console.log(`\nTotal colors to queue: ${colors.length}`);

  // Send to batch endpoint
  const response = await fetch('https://api.rafters.studio/queue/batch', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
    },
    body: JSON.stringify({
      colors,
      batchId: `tailwind-v4-warmup-${Date.now()}`,
    }),
  });

  if (!response.ok) {
    const error = await response.text();
    console.error(`Failed to queue colors: ${response.status} ${error}`);
    process.exit(1);
  }

  const result = await response.json();
  console.log('\nQueue response:', JSON.stringify(result, null, 2));
}

warmCache().catch(console.error);
