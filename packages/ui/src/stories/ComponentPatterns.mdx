import { Meta } from '@storybook/addon-docs/blocks';

<Meta title="00 Introduction/Component Intelligence Synthesis" name="Overview" />

# Component Intelligence Synthesis

How to combine all design intelligence patterns when composing Rafters components into trustworthy, accessible, and cognitively optimized interfaces.

## The Intelligence Integration Framework

**Every interface decision should integrate five core intelligence layers:** Attention Economics, Cognitive Load Management, Negative Space Mastery, Typography Intelligence, and Progressive Enhancement. When these patterns work together, they create interfaces that feel effortless and trustworthy to users.

### The Unified Decision Process
Before implementing any component composition, apply this integrated thinking:

1. **Attention**: What deserves the user's focus? How do we guide their attention efficiently?
2. **Cognition**: How much mental effort does this require? Can we reduce extraneous load?
3. **Space**: How does whitespace create hierarchy and breathing room?
4. **Typography**: How does text hierarchy support information architecture?
5. **Enhancement**: What's the core experience, and what can we layer on top?

## Integrated Pattern Examples

### Landing Page Composition
Applying all intelligence patterns to create an effective landing page:

```tsx
// ‚úÖ INTEGRATED INTELLIGENCE - All patterns working together
function IntelligentLandingPage() {
  return (
    <div className="min-h-screen">
      {/* NEGATIVE SPACE: Generous spacing creates premium feel */}
      <main className="space-y-20 py-16">
        
        {/* ATTENTION ECONOMICS: Single primary focus */}
        <section className="text-center space-y-8 px-6">
          
          {/* TYPOGRAPHY: Clear hierarchy guides scanning */}
          <div className="space-y-6">
            <h1 className="text-5xl font-bold tracking-tight">
              Build Trust Through Design
            </h1>
            
            <p className="text-xl text-muted-foreground max-w-3xl mx-auto leading-relaxed">
              Rafters components encode human design intelligence to help you create 
              interfaces that reduce user anxiety and build confidence.
            </p>
          </div>
          
          {/* ATTENTION: Clear primary action with supporting alternatives */}
          <div className="space-y-4">
            <Button variant="primary" size="lg" className="px-8 py-4">
              Get Started Free
            </Button>
            
            <div className="flex items-center justify-center gap-4">
              <Button variant="ghost" size="sm">View Examples</Button>
              <span className="text-muted-foreground">‚Ä¢</span>
              <Button variant="ghost" size="sm">Read Documentation</Button>
            </div>
          </div>
        </section>
        
        {/* COGNITIVE LOAD: Information chunked into digestible sections */}
        <section className="px-6">
          <div className="max-w-6xl mx-auto">
            
            {/* TYPOGRAPHY: Section hierarchy */}
            <div className="text-center space-y-4 mb-16">
              <h2 className="text-3xl font-semibold">
                Intelligence-First Components
              </h2>
              <p className="text-lg text-muted-foreground max-w-2xl mx-auto">
                Every component encodes design reasoning that helps you make better decisions
              </p>
            </div>
            
            {/* NEGATIVE SPACE: Grid with generous gaps */}
            <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
              
              {/* PROGRESSIVE ENHANCEMENT: Core content works without JavaScript */}
              <Card className="p-8 space-y-4">
                <div className="w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center">
                  <TrustIcon className="w-6 h-6 text-primary" />
                </div>
                
                <h3 className="text-xl font-semibold">Trust Building</h3>
                
                <p className="text-muted-foreground leading-relaxed">
                  Components adapt friction to consequence level, preventing 
                  accidental destructive actions while keeping routine tasks effortless.
                </p>
                
                <Button variant="ghost" size="sm" className="p-0 h-auto justify-start">
                  Learn about trust patterns ‚Üí
                </Button>
              </Card>
              
              <Card className="p-8 space-y-4">
                <div className="w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center">
                  <BrainIcon className="w-6 h-6 text-primary" />
                </div>
                
                <h3 className="text-xl font-semibold">Cognitive Optimization</h3>
                
                <p className="text-muted-foreground leading-relaxed">
                  Every component considers Miller's Law and cognitive load theory 
                  to prevent user overwhelm and decision paralysis.
                </p>
                
                <Button variant="ghost" size="sm" className="p-0 h-auto justify-start">
                  Explore cognitive patterns ‚Üí
                </Button>
              </Card>
              
              <Card className="p-8 space-y-4">
                <div className="w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center">
                  <AccessibilityIcon className="w-6 h-6 text-primary" />
                </div>
                
                <h3 className="text-xl font-semibold">Universal Access</h3>
                
                <p className="text-muted-foreground leading-relaxed">
                  WCAG AAA compliance and universal design principles ensure 
                  every user can succeed with your interface.
                </p>
                
                <Button variant="ghost" size="sm" className="p-0 h-auto justify-start">
                  See accessibility features ‚Üí
                </Button>
              </Card>
            </div>
          </div>
        </section>
      </main>
    </div>
  );
}
```

### Dashboard Interface Integration
Applying intelligence patterns to create a scannable, efficient dashboard:

```tsx
// ‚úÖ DASHBOARD INTELLIGENCE - Information density with cognitive clarity
function IntelligentDashboard() {
  return (
    <div className="space-y-8 p-6">
      
      {/* ATTENTION + TYPOGRAPHY: Clear page hierarchy */}
      <div className="flex items-center justify-between">
        <div className="space-y-1">
          <h1 className="text-2xl font-bold">Dashboard Overview</h1>
          <p className="text-muted-foreground">
            Key metrics and recent activity
          </p>
        </div>
        
        {/* ATTENTION: Single primary action */}
        <Button variant="primary">Create New Project</Button>
      </div>
      
      {/* COGNITIVE LOAD: Metrics grouped logically, limited to 7¬±2 items */}
      <section className="space-y-4">
        <h2 className="text-lg font-semibold">Key Metrics</h2>
        
        {/* NEGATIVE SPACE: Generous gaps between unrelated data */}
        <div className="grid grid-cols-2 md:grid-cols-4 gap-6">
          <Card className="p-6 space-y-2">
            {/* TYPOGRAPHY: Data hierarchy - value most prominent */}
            <div className="text-3xl font-bold tabular-nums">1,234</div>
            <div className="text-sm text-muted-foreground">Active Users</div>
            <div className="text-xs text-success-foreground">+12% this month</div>
          </Card>
          
          <Card className="p-6 space-y-2">
            <div className="text-3xl font-bold tabular-nums">$45.6k</div>
            <div className="text-sm text-muted-foreground">Revenue</div>
            <div className="text-xs text-success-foreground">+8% this month</div>
          </Card>
          
          <Card className="p-6 space-y-2">
            <div className="text-3xl font-bold tabular-nums">89%</div>
            <div className="text-sm text-muted-foreground">Satisfaction</div>
            <div className="text-xs text-muted-foreground">Same as last month</div>
          </Card>
          
          <Card className="p-6 space-y-2">
            <div className="text-3xl font-bold tabular-nums">12ms</div>
            <div className="text-sm text-muted-foreground">Avg Response</div>
            <div className="text-xs text-destructive-foreground">+2ms slower</div>
          </Card>
        </div>
      </section>
      
      {/* PROGRESSIVE ENHANCEMENT: Secondary content loads progressively */}
      <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
        
        {/* COGNITIVE LOAD: Related activities grouped together */}
        <section className="space-y-4">
          <h2 className="text-lg font-semibold">Recent Activity</h2>
          
          <Card className="divide-y">
            {recentActivities.slice(0, 5).map((activity) => (
              <div key={activity.id} className="p-4 space-y-2">
                {/* NEGATIVE SPACE: Tight spacing shows relationship */}
                <div className="flex items-center justify-between">
                  <h4 className="font-medium">{activity.title}</h4>
                  <span className="text-sm text-muted-foreground">
                    {activity.time}
                  </span>
                </div>
                <p className="text-sm text-muted-foreground">
                  {activity.description}
                </p>
              </div>
            ))}
          </Card>
        </section>
        
        {/* ATTENTION: Less important but available information */}
        <section className="space-y-4">
          <h2 className="text-lg font-semibold">System Status</h2>
          
          <Card className="p-6 space-y-4">
            <div className="flex items-center gap-3">
              <div className="w-3 h-3 bg-success rounded-full" />
              <span className="font-medium">All Systems Operational</span>
            </div>
            
            <div className="space-y-3">
              <div className="flex justify-between text-sm">
                <span>API Response Time</span>
                <span className="tabular-nums">12ms</span>
              </div>
              
              <div className="flex justify-between text-sm">
                <span>Database Connection</span>
                <span className="text-success-foreground">Healthy</span>
              </div>
              
              <div className="flex justify-between text-sm">
                <span>Last Backup</span>
                <span className="tabular-nums">2 hours ago</span>
              </div>
            </div>
          </Card>
        </section>
      </div>
    </div>
  );
}
```

### Form Interface Integration
Combining all patterns for an anxiety-reducing, efficient form experience:

```tsx
// ‚úÖ FORM INTELLIGENCE - Trust building through progressive disclosure
function IntelligentForm() {
  const [currentStep, setCurrentStep] = useState(1);
  const [formData, setFormData] = useFormData();
  
  return (
    <div className="max-w-2xl mx-auto space-y-8 p-6">
      
      {/* ATTENTION: Clear progress indication */}
      <div className="space-y-4">
        <div className="flex items-center gap-2">
          <span className="text-sm text-muted-foreground">
            Step {currentStep} of 3
          </span>
          <div className="flex-1 h-2 bg-muted rounded-full">
            <div 
              className="h-full bg-primary rounded-full transition-all duration-300"
              style={{ width: `${(currentStep / 3) * 100}%` }}
            />
          </div>
        </div>
        
        {/* TYPOGRAPHY: Clear section hierarchy */}
        <div className="space-y-2">
          <h1 className="text-2xl font-bold">
            {currentStep === 1 && "Personal Information"}
            {currentStep === 2 && "Account Preferences"}
            {currentStep === 3 && "Review & Confirm"}
          </h1>
          <p className="text-muted-foreground">
            {currentStep === 1 && "Let's start with some basic information about you"}
            {currentStep === 2 && "Customize your account settings and preferences"}
            {currentStep === 3 && "Review your information before creating your account"}
          </p>
        </div>
      </div>
      
      {/* PROGRESSIVE ENHANCEMENT: Core form works without JavaScript */}
      <form 
        action="/api/signup" 
        method="POST"
        className="space-y-6"
        onSubmit={handleSubmit}
      >
        
        {/* COGNITIVE LOAD: Single step focus prevents overwhelm */}
        {currentStep === 1 && (
          <div className="space-y-6">
            
            {/* NEGATIVE SPACE: Grouped related fields */}
            <div className="space-y-4">
              <div className="grid grid-cols-2 gap-4">
                <div className="space-y-2">
                  <Label htmlFor="firstName">First Name *</Label>
                  <Input 
                    id="firstName"
                    name="firstName"
                    required
                    defaultValue={formData.firstName}
                  />
                </div>
                
                <div className="space-y-2">
                  <Label htmlFor="lastName">Last Name *</Label>
                  <Input 
                    id="lastName"
                    name="lastName"
                    required
                    defaultValue={formData.lastName}
                  />
                </div>
              </div>
              
              <div className="space-y-2">
                <Label htmlFor="email">Email Address *</Label>
                <Input 
                  id="email"
                  name="email"
                  type="email"
                  required
                  defaultValue={formData.email}
                  aria-describedby="email-help"
                />
                <p id="email-help" className="text-sm text-muted-foreground">
                  We'll use this to send you account updates
                </p>
              </div>
              
              <div className="space-y-2">
                <Label htmlFor="password">Password *</Label>
                <Input 
                  id="password"
                  name="password"
                  type="password"
                  required
                  aria-describedby="password-help"
                />
                <p id="password-help" className="text-sm text-muted-foreground">
                  At least 8 characters with mixed case and numbers
                </p>
              </div>
            </div>
          </div>
        )}
        
        {/* ATTENTION: Navigation hierarchy - continue most prominent */}
        <div className="flex gap-4 pt-6 border-t border-border">
          <Button 
            type="button" 
            variant="outline" 
            disabled={currentStep === 1}
            onClick={() => setCurrentStep(currentStep - 1)}
          >
            Previous
          </Button>
          
          <Button 
            type={currentStep === 3 ? "submit" : "button"}
            variant="primary"
            className="flex-1"
            onClick={currentStep < 3 ? () => setCurrentStep(currentStep + 1) : undefined}
          >
            {currentStep === 3 ? 'Create Account' : 'Continue'}
          </Button>
        </div>
        
        {/* TRUST BUILDING: Security and privacy assurance */}
        <div className="text-center pt-4">
          <p className="text-xs text-muted-foreground">
            üîí Your information is encrypted and never shared with third parties
          </p>
        </div>
      </form>
    </div>
  );
}
```

## Pattern Integration Guidelines

### The Five-Layer Checklist
For every component composition, verify all intelligence patterns are applied:

#### 1. Attention Economics ‚úì
- [ ] **Clear primary action** - One most important thing per section
- [ ] **Visual hierarchy** - Important elements are more prominent
- [ ] **Attention recovery** - Breaks between complex sections
- [ ] **Focus guidance** - User's eye follows intended path

#### 2. Cognitive Load Management ‚úì  
- [ ] **7¬±2 rule respected** - Limited choices per section
- [ ] **Progressive disclosure** - Complexity revealed when needed
- [ ] **Consistent patterns** - Similar elements behave similarly
- [ ] **Clear mental models** - Interface behavior is predictable

#### 3. Negative Space Mastery ‚úì
- [ ] **Relationship grouping** - Related items close together
- [ ] **Hierarchy through space** - Important content gets more space
- [ ] **Breathing room provided** - Dense sections have recovery points
- [ ] **Mathematical consistency** - Spacing follows systematic scales

#### 4. Typography Intelligence ‚úì
- [ ] **Clear information hierarchy** - 6 levels maximum
- [ ] **Scannable structure** - Headers guide content flow
- [ ] **Appropriate emphasis** - Bold/italic used strategically
- [ ] **Accessible contrast** - WCAG AAA compliance (7:1 ratio)

#### 5. Progressive Enhancement ‚úì
- [ ] **Core functionality first** - Works without JavaScript
- [ ] **Layer enhancements** - JavaScript adds, doesn't replace
- [ ] **Graceful degradation** - Failures don't break experience
- [ ] **Device adaptation** - Appropriate features for capabilities

### Integration Anti-Patterns

#### The Conflicting Patterns Problem
When patterns contradict each other, creating confused experiences:

```tsx
// ‚ùå PATTERN CONFLICT - Space says "separate" but typography says "related"
<div className="space-y-12"> {/* Large space suggests separation */}
  <h2 className="text-base font-normal">Section Title</h2> {/* Weak hierarchy suggests connection */}
  <div className="grid grid-cols-3 gap-2"> {/* Tight gaps suggest grouping */}
    <Card>Content 1</Card>
    <Card>Content 2</Card>
    <Card>Content 3</Card>
  </div>
</div>

// ‚úÖ PATTERN HARMONY - All patterns support the intended relationship
<div className="space-y-6"> {/* Moderate space for related sections */}
  <h2 className="text-2xl font-semibold">Section Title</h2> {/* Strong hierarchy */}
  <div className="grid grid-cols-3 gap-6"> {/* Consistent spacing scale */}
    <Card>Content 1</Card>
    <Card>Content 2</Card>
    <Card>Content 3</Card>
  </div>
</div>
```

#### The Over-Enhancement Trap
Adding so many enhancements that the core experience is obscured:

```tsx
// ‚ùå ENHANCEMENT OVERLOAD - Core functionality buried under features
function OverEnhancedButton({ onClick, children }) {
  return (
    <motion.button
      whileHover={{ scale: 1.05, rotate: 2 }}
      whileTap={{ scale: 0.95 }}
      animate={{ 
        backgroundImage: gradientAnimation,
        boxShadow: pulsingGlow 
      }}
      onClick={async (e) => {
        await playSound('click.mp3');
        await hapticFeedback();
        await trackAnalytics('button_clicked');
        onClick?.(e);
      }}
    >
      <ParticleEffect />
      <GlowEffect />
      {children}
      <AnimatedIcon />
    </motion.button>
  );
}

// ‚úÖ THOUGHTFUL ENHANCEMENT - Core clear, enhancements purposeful  
function EnhancedButton({ onClick, children, loading }) {
  return (
    <button
      onClick={onClick}
      disabled={loading}
      className={cn(
        // Core: Always accessible and clear
        "px-4 py-2 font-medium rounded focus-visible:ring-2",
        "bg-primary text-primary-foreground",
        
        // Enhancement: Smooth transitions
        "transition-colors duration-150",
        "hover:bg-primary/90 focus-visible:bg-primary/90",
        
        // Enhancement: Loading state
        loading && "opacity-75 cursor-not-allowed"
      )}
    >
      {loading ? (
        <div className="flex items-center gap-2">
          <Spinner className="w-4 h-4" />
          <span>Loading...</span>
        </div>
      ) : (
        children
      )}
    </button>
  );
}
```

## Practical Application Framework

### The Intelligence Integration Workflow

1. **Start with Content** - What information does the user need?
2. **Apply Cognitive Structure** - How can we chunk and organize this?
3. **Design Attention Flow** - What's the most important action/information?
4. **Add Spatial Hierarchy** - How does space support the information architecture?
5. **Layer Typography** - How does text hierarchy guide understanding?
6. **Plan Enhancement** - What's the core experience? What can we layer on?
7. **Verify Accessibility** - Does this work for all users and contexts?

### Pattern Validation Questions

Before shipping any interface composition, ask:

- **Attention**: Can users immediately understand what's most important?
- **Cognition**: Is the mental effort justified by the value provided?
- **Space**: Does whitespace create clear relationships and hierarchy?
- **Typography**: Can users scan and find information efficiently?
- **Enhancement**: Does the interface work if enhancements fail?

---

**Remember: Intelligence patterns work best when they reinforce each other. Every pattern should support the user's core goal of accomplishing their task with confidence and ease.**