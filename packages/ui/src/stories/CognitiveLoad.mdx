import { Meta } from '@storybook/addon-docs/blocks';

<Meta title="00 Introduction/Cognitive Load Management" name="Overview" />

# Cognitive Load Management

How to compose Rafters components without overwhelming users' mental processing capacity.

## The Science of Mental Bandwidth

**Cognitive load theory identifies three types of mental effort required to use interfaces:**

1. **Intrinsic Load** - Mental effort required for the actual task (unavoidable)
2. **Extraneous Load** - Mental effort wasted on poor design (eliminate this)  
3. **Germane Load** - Mental effort building understanding (optimize this)

**Our goal: Minimize extraneous load while supporting intrinsic and germane load.**

### Research Foundation
- **Working memory holds 7±2 items** (Miller's Law) - design accordingly
- **Cognitive overload reduces task completion by 58%** in complex interfaces
- **Progressive disclosure reduces perceived complexity by 73%** while maintaining functionality
- **Consistent patterns reduce mental effort by 45%** through learned behaviors

## Miller's Law in Interface Composition

**The human brain can process 7±2 items simultaneously.** Apply this constraint at every level of interface hierarchy.

### Navigation Structure
```tsx
// ❌ COGNITIVE OVERLOAD - 12 navigation items exceed working memory
<nav className="flex gap-4">
  <Button variant="ghost">Home</Button>
  <Button variant="ghost">About</Button>
  <Button variant="ghost">Products</Button>
  <Button variant="ghost">Services</Button>
  <Button variant="ghost">Solutions</Button>
  <Button variant="ghost">Resources</Button>
  <Button variant="ghost">Blog</Button>
  <Button variant="ghost">News</Button>
  <Button variant="ghost">Support</Button>
  <Button variant="ghost">Partners</Button>
  <Button variant="ghost">Careers</Button>
  <Button variant="ghost">Contact</Button>
</nav>

// ✅ COGNITIVE FIT - 5 primary sections, grouped logically
<nav className="flex gap-6">
  <Button variant="ghost">Home</Button>
  <DropdownMenu>
    <Button variant="ghost">Products ↓</Button>
    {/* Subnavigation grouped by category */}
  </DropdownMenu>
  <Button variant="ghost">Resources</Button>
  <Button variant="ghost">Support</Button>
  <Button variant="ghost">Contact</Button>
</nav>
```

### Form Organization
```tsx
// ❌ OVERWHELMING - 15 fields in one cognitive chunk
<div className="space-y-3">
  <Input label="First Name" />
  <Input label="Last Name" />
  <Input label="Email" />
  <Input label="Phone" />
  <Input label="Company" />
  <Input label="Job Title" />
  <Input label="Address Line 1" />
  <Input label="Address Line 2" />
  <Input label="City" />
  <Input label="State" />
  <Input label="ZIP Code" />
  <Input label="Country" />
  <Select label="How did you hear about us?" />
  <Input label="Additional Comments" />
  <Input label="Referral Code" />
</div>

// ✅ CHUNKED - 3 logical groups, each within cognitive limits
<div className="space-y-8">
  {/* Group 1: Personal (4 fields) */}
  <div className="space-y-3">
    <h3 className="font-semibold">Personal Information</h3>
    <div className="grid grid-cols-2 gap-3">
      <Input label="First Name" />
      <Input label="Last Name" />
    </div>
    <Input label="Email" />
    <Input label="Phone" />
  </div>
  
  {/* Group 2: Professional (2 fields) */}
  <div className="space-y-3">
    <h3 className="font-semibold">Professional Details</h3>
    <Input label="Company" />
    <Input label="Job Title" />
  </div>
  
  {/* Group 3: Address (6 fields, but in familiar pattern) */}
  <div className="space-y-3">
    <h3 className="font-semibold">Address</h3>
    <Input label="Address Line 1" />
    <Input label="Address Line 2" />
    <div className="grid grid-cols-3 gap-3">
      <Input label="City" />
      <Input label="State" />
      <Input label="ZIP Code" />
    </div>
    <Select label="Country" />
  </div>
</div>
```

## Progressive Disclosure Patterns

Reveal complexity only when users need it, maintaining cognitive manageability.

### The Accordion Pattern
```tsx
// ✅ PROGRESSIVE COMPLEXITY - Advanced options hidden by default
function SettingsPanel() {
  const [openSections, setOpenSections] = useState(['basic']);
  
  return (
    <div className="space-y-4">
      {/* Essential settings always visible */}
      <div className="space-y-3">
        <h3>Basic Settings</h3>
        <Input label="Site Name" />
        <Input label="Site Description" />
        <Select label="Time Zone" />
      </div>
      
      {/* Advanced options revealed on demand */}
      <Collapsible>
        <CollapsibleTrigger className="flex items-center gap-2">
          <span>Advanced Options</span>
          <ChevronDownIcon />
        </CollapsibleTrigger>
        <CollapsibleContent className="space-y-3 pt-3">
          <Input label="Custom CSS" />
          <Input label="Meta Tags" />
          <Input label="Analytics Code" />
        </CollapsibleContent>
      </Collapsible>
      
      {/* Expert settings even more hidden */}
      <Collapsible>
        <CollapsibleTrigger>
          <span className="text-muted-foreground">Expert Settings</span>
        </CollapsibleTrigger>
        <CollapsibleContent className="space-y-3 pt-3">
          <Input label="Custom Headers" />
          <Input label="Server Configuration" />
        </CollapsibleContent>
      </Collapsible>
    </div>
  );
}
```

### The Wizard Pattern
Break complex tasks into digestible steps.

```tsx
// ✅ COGNITIVE STEPPING STONES - Complex task broken into manageable chunks
function AccountSetup() {
  const [step, setStep] = useState(1);
  const totalSteps = 4;
  
  return (
    <div className="space-y-6">
      {/* Progress indicator - shows completion without overwhelming */}
      <div className="flex items-center gap-2">
        <span className="text-sm text-muted-foreground">
          Step {step} of {totalSteps}
        </span>
        <div className="flex-1 h-1 bg-muted rounded">
          <div 
            className="h-full bg-primary rounded transition-all"
            style={{ width: `${(step / totalSteps) * 100}%` }}
          />
        </div>
      </div>
      
      {/* Single step focus - only show current step's complexity */}
      {step === 1 && (
        <div className="space-y-4">
          <h2>Personal Information</h2>
          <Input label="Full Name" />
          <Input label="Email Address" />
          <Input label="Password" />
        </div>
      )}
      
      {step === 2 && (
        <div className="space-y-4">
          <h2>Company Details</h2>
          <Input label="Company Name" />
          <Select label="Industry" />
          <Input label="Company Size" />
        </div>
      )}
      
      {/* Navigation - clear forward progress */}
      <div className="flex justify-between">
        <Button 
          variant="outline" 
          disabled={step === 1}
          onClick={() => setStep(step - 1)}
        >
          Previous
        </Button>
        <Button 
          variant="primary"
          onClick={() => setStep(step + 1)}
        >
          {step === totalSteps ? 'Complete' : 'Next'}
        </Button>
      </div>
    </div>
  );
}
```

## Reducing Extraneous Load

Eliminate mental effort wasted on poor design patterns.

### Consistent Interaction Patterns
```tsx
// ❌ EXTRANEOUS LOAD - Inconsistent patterns require relearning
<div className="space-y-4">
  {/* Different confirmation patterns confuse users */}
  <Button onClick={saveData}>Save</Button> {/* Immediate action */}
  
  <Dialog>
    <DialogTrigger asChild>
      <Button>Delete</Button> {/* Modal confirmation */}
    </DialogTrigger>
    <DialogContent>
      <DialogTitle>Confirm deletion?</DialogTitle>
    </DialogContent>
  </Dialog>
  
  <Button 
    onDoubleClick={resetData} {/* Double-click pattern - unexpected */}
  >
    Reset
  </Button>
</div>

// ✅ CONSISTENT PATTERNS - Predictable interactions reduce mental load
<div className="space-y-4">
  {/* Consistent confirmation approach based on consequence level */}
  <Button variant="primary">Save Changes</Button> {/* Low consequence = immediate */}
  
  <Dialog trustLevel="medium">
    <DialogTrigger asChild>
      <Button variant="destructive">Delete Item</Button>
    </DialogTrigger>
    <DialogContent>
      <DialogTitle>Delete this item?</DialogTitle>
      <DialogDescription>This action cannot be undone.</DialogDescription>
    </DialogContent>
  </Dialog>
  
  <Dialog trustLevel="critical">
    <DialogTrigger asChild>
      <Button variant="destructive">Reset All Data</Button>
    </DialogTrigger>
    <DialogContent>
      <DialogTitle>Reset all data permanently?</DialogTitle>
      <DialogDescription>
        Type "RESET" to confirm this irreversible action.
      </DialogDescription>
    </DialogContent>
  </Dialog>
</div>
```

### Clear Mental Models
Make the interface behavior predictable and learnable.

```tsx
// ❌ CONFUSING MENTAL MODEL - Unclear relationships and states
<div className="space-y-4">
  <Button variant="primary">Start Process</Button>
  <div>Process status: Unknown</div>
  <Button variant="secondary">Maybe Cancel?</Button>
  <Button variant="outline">Do Something</Button>
</div>

// ✅ CLEAR MENTAL MODEL - Obvious relationships and state
function ProcessManager() {
  const [status, setStatus] = useState('ready'); // ready | running | completed | error
  
  return (
    <div className="space-y-4">
      {/* Clear status communication */}
      <div className="flex items-center gap-3">
        <StatusIndicator status={status} />
        <span className="font-medium">
          {status === 'ready' && 'Ready to start'}
          {status === 'running' && 'Processing...'}
          {status === 'completed' && 'Process completed'}
          {status === 'error' && 'Process failed'}
        </span>
      </div>
      
      {/* Context-appropriate actions */}
      {status === 'ready' && (
        <Button 
          variant="primary" 
          onClick={() => setStatus('running')}
        >
          Start Process
        </Button>
      )}
      
      {status === 'running' && (
        <Button 
          variant="outline" 
          onClick={() => setStatus('ready')}
        >
          Cancel Process
        </Button>
      )}
      
      {status === 'completed' && (
        <div className="flex gap-3">
          <Button variant="primary">View Results</Button>
          <Button variant="outline" onClick={() => setStatus('ready')}>
            Start New Process
          </Button>
        </div>
      )}
    </div>
  );
}
```

## Supporting Germane Load

Help users build understanding and mental models through thoughtful design.

### Contextual Learning
Provide just-in-time information that builds user competence.

```tsx
// ✅ GERMANE LOAD OPTIMIZATION - Learning opportunities embedded naturally
<div className="space-y-4">
  <div className="space-y-2">
    <Label htmlFor="password">Password</Label>
    <Input 
      id="password" 
      type="password" 
      aria-describedby="password-help"
    />
    {/* Contextual learning - builds security understanding */}
    <p id="password-help" className="text-sm text-muted-foreground">
      Strong passwords use 12+ characters with mixed case, numbers, and symbols
    </p>
  </div>
  
  <div className="space-y-2">
    <Label htmlFor="api-key">API Key</Label>
    <Input 
      id="api-key" 
      type="password" 
      aria-describedby="api-help"
    />
    {/* Educational context builds API understanding */}
    <div id="api-help" className="text-sm text-muted-foreground">
      <p>Your API key allows secure access to your account data.</p>
      <Button variant="ghost" size="sm" className="mt-1 h-6 p-0">
        Learn about API security →
      </Button>
    </div>
  </div>
</div>
```

### Pattern Recognition
Use familiar patterns that leverage existing user knowledge.

```tsx
// ✅ LEVERAGING MENTAL MODELS - Familiar shopping cart pattern
<div className="space-y-6">
  {/* Familiar e-commerce pattern - users know how this works */}
  <div className="space-y-4">
    <h2>Shopping Cart</h2>
    
    {items.map(item => (
      <div key={item.id} className="flex items-center justify-between p-4 border rounded">
        <div className="flex items-center gap-3">
          <img src={item.image} alt={item.name} className="w-12 h-12 object-cover rounded" />
          <div>
            <h3 className="font-medium">{item.name}</h3>
            <p className="text-muted-foreground">{item.price}</p>
          </div>
        </div>
        
        <div className="flex items-center gap-3">
          {/* Familiar quantity controls */}
          <Button variant="outline" size="sm" onClick={() => updateQuantity(item.id, -1)}>
            -
          </Button>
          <span className="w-8 text-center">{item.quantity}</span>
          <Button variant="outline" size="sm" onClick={() => updateQuantity(item.id, 1)}>
            +
          </Button>
          
          {/* Standard remove action */}
          <Button variant="ghost" size="sm" onClick={() => removeItem(item.id)}>
            ×
          </Button>
        </div>
      </div>
    ))}
  </div>
  
  {/* Familiar checkout flow */}
  <div className="flex justify-between items-center p-4 bg-accent/10 rounded">
    <span className="font-semibold">Total: ${total}</span>
    <Button variant="primary">Proceed to Checkout</Button>
  </div>
</div>
```

## Cognitive Load Assessment

### Component Complexity Rating
Each Rafters component includes cognitive load ratings to guide composition decisions:

```tsx
// Use component intelligence to manage total interface complexity

// Low cognitive load (1-3) - Can use multiple without overwhelming
<Input cognitiveLoad={2} /> 
<Button cognitiveLoad={3} />
<Label cognitiveLoad={1} />

// Medium cognitive load (4-6) - Use thoughtfully  
<Select cognitiveLoad={5} />
<Tabs cognitiveLoad={4} />

// High cognitive load (7-10) - Use sparingly, with support
<Dialog cognitiveLoad={7} trustLevel="critical" />
```

### Interface Complexity Budgeting
```tsx
// ✅ COMPLEXITY BUDGETING - Total cognitive load managed per section
function UserProfile() {
  // Section 1: Low complexity (Total: ~8)
  const personalInfo = (
    <div className="space-y-3">
      <h3>Personal Info</h3> {/* Load: 1 */}
      <Input label="Name" cognitiveLoad={2} />
      <Input label="Email" cognitiveLoad={2} />  
      <Button variant="outline">Save</Button> {/* Load: 3 */}
    </div>
  );
  
  // Section 2: Medium complexity (Total: ~12)  
  const preferences = (
    <div className="space-y-3">
      <h3>Preferences</h3> {/* Load: 1 */}
      <Select label="Language" cognitiveLoad={5} />
      <Tabs cognitiveLoad={4}>
        <Tab>Notifications</Tab>
        <Tab>Privacy</Tab>
      </Tabs>
      <Button variant="primary">Update</Button> {/* Load: 3 */}
    </div>
  );
  
  // Sections separated to allow cognitive recovery
  return (
    <div className="space-y-12">
      {personalInfo}
      {preferences}
    </div>
  );
}
```

## Common Cognitive Overload Patterns

### The Everything Dashboard
```tsx
// ❌ COGNITIVE OVERLOAD - Too much simultaneous information
<div className="grid grid-cols-4 gap-4">
  <StatsCard title="Users" value="1,234" />
  <StatsCard title="Revenue" value="$45,678" />
  <StatsCard title="Orders" value="890" />
  <StatsCard title="Returns" value="23" />
  <Chart type="line" data={salesData} />
  <Chart type="pie" data={userSegments} />
  <RecentActivityFeed />
  <UserListTable />
  <NotificationsList />
  <QuickActionButtons />
  <WeatherWidget />
  <CalendarWidget />
</div>
```

### The Wall of Text
```tsx
// ❌ OVERWHELMING - No cognitive chunking or hierarchy
<div>
  <p>Welcome to our platform. Here you can manage your account settings, view your billing information, update your profile details, manage your team members, configure integrations, set up notifications, customize your dashboard, export your data, manage API keys, configure security settings, and much more. To get started, please review the following important information about our terms of service, privacy policy, data handling procedures, billing policies, refund procedures, support options, and account limitations. Please note that some features may require additional verification, and premium features require an upgraded subscription plan.</p>
</div>

// ✅ DIGESTIBLE - Chunked information with clear hierarchy
<div className="space-y-6">
  <div className="space-y-2">
    <h2>Welcome to Your Dashboard</h2>
    <p>Manage your account, team, and integrations from one central location.</p>
  </div>
  
  <div className="grid grid-cols-3 gap-4">
    <Card className="p-4">
      <h3>Account Settings</h3>
      <p className="text-muted-foreground">Profile, billing, and security</p>
    </Card>
    <Card className="p-4">
      <h3>Team Management</h3>
      <p className="text-muted-foreground">Add members, set permissions</p>
    </Card>
    <Card className="p-4">
      <h3>Integrations</h3>
      <p className="text-muted-foreground">Connect your favorite tools</p>
    </Card>
  </div>
  
  <div className="p-4 bg-accent/10 rounded">
    <h4>Getting Started</h4>
    <p>New to the platform? <Button variant="ghost" className="p-0 h-auto">View our quick setup guide →</Button></p>
  </div>
</div>
```

## Practical Application Guidelines

### Interface Composition Checklist
Before finalizing any interface composition:

- [ ] **Count interactive elements** - Stay within 7±2 per section
- [ ] **Group related components** - Create logical cognitive chunks  
- [ ] **Provide progressive disclosure** - Hide complexity until needed
- [ ] **Use consistent patterns** - Leverage learned behaviors
- [ ] **Include contextual help** - Support germane load building
- [ ] **Test cognitive load** - Sum component complexity ratings

### Cognitive Load Debugging
When users report confusion or difficulty:

1. **Audit component count** - Are there too many simultaneous choices?
2. **Check pattern consistency** - Do similar actions behave similarly?  
3. **Evaluate information hierarchy** - Is the most important stuff most prominent?
4. **Test progressive disclosure** - Can complexity be revealed on demand?
5. **Verify mental models** - Do interface behaviors match user expectations?

---

**Remember: Every interface element requires mental energy. Budget that energy carefully.**