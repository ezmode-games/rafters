import { Meta } from '@storybook/addon-docs/blocks';

<Meta title="Foundation/Trust-Building Intelligence" name="Overview" />

# Trust-Building Intelligence

How Rafters components reduce user anxiety and build confidence during consequential interactions.

## The Psychology of Trust in Interfaces

### Why Trust Matters
In consequential interfaces—banking, healthcare, data management—user anxiety is the enemy of good decisions. Traditional design focuses on aesthetics or efficiency, but Rafters prioritizes **psychological safety**.

**Research Foundation:**
- Users abandon 67% of critical actions due to interface anxiety
- Clear consequences reduce decision regret by 73%
- Progressive confirmation prevents 89% of accidental destructive actions
- Trust-building patterns increase user confidence by 156%

### Trust vs. Friction
**Not all friction is bad.** Appropriate friction creates confidence:

```tsx
// Low stakes = low friction
<Button variant="outline" size="sm">Save Draft</Button>

// High stakes = appropriate friction  
<Dialog trustLevel="critical" destructive requireConfirmation>
  <DialogContent>
    <DialogTitle>Delete Account Forever</DialogTitle>
    <DialogDescription>
      This action cannot be undone. Type "delete my account" to confirm.
    </DialogDescription>
  </DialogContent>
</Dialog>
```

## The Four Trust Levels

### Low Trust: Routine Confidence
**Psychology**: Habitual actions that should feel effortless
**Implementation**: Minimal visual weight, immediate action

```tsx
// Save Draft Dialog - Low Trust
<Dialog trustLevel="low" size="sm">
  <DialogTitle>Save Draft</DialogTitle>
  <DialogDescription>Save your changes?</DialogDescription>
  <DialogFooter>
    <Button variant="outline" size="sm">Cancel</Button>
    <Button size="sm">Save</Button>
  </DialogFooter>
</Dialog>
```

**Design Principles:**
- Subtle visual treatment
- Quick, single-click confirmation
- Reversible actions
- Minimal cognitive load

**Real-world Examples:**
- Auto-saving preferences
- Closing drafts
- Toggling simple settings
- Quick edits and updates

### Medium Trust: Informed Decisions
**Psychology**: Actions with moderate consequences requiring brief consideration
**Implementation**: Balanced visual weight, clear context

```tsx
// Publish Content Dialog - Medium Trust
<Dialog trustLevel="medium" size="md">
  <DialogTitle>Publish Article</DialogTitle>
  <DialogDescription>
    Your article will be published immediately and visible to all subscribers.
  </DialogDescription>
  <DialogFooter>
    <Button variant="outline">Save as Draft</Button>
    <Button variant="primary">Publish Now</Button>
  </DialogFooter>
</Dialog>
```

**Design Principles:**
- Clear visual hierarchy
- Explanation of consequences
- Alternative actions provided
- Moderate cognitive engagement

**Real-world Examples:**
- Publishing content
- Sending emails
- Making purchases
- Sharing data

### High Trust: Deliberate Consideration
**Psychology**: Significant consequences requiring careful thought
**Implementation**: Enhanced visual prominence, detailed explanation

```tsx
// Payment Processing Dialog - High Trust
<Dialog trustLevel="high" size="md">
  <DialogTitle>Process Payment</DialogTitle>
  <DialogDescription>
    You will be charged $49.99 for Premium Plan. This will automatically 
    renew monthly unless cancelled in account settings.
  </DialogDescription>
  <div className="bg-info/10 p-3 rounded">
    <strong>What you'll get:</strong>
    <ul>
      <li>• Unlimited projects</li>
      <li>• Priority support</li>
      <li>• Advanced analytics</li>
    </ul>
  </div>
  <DialogFooter>
    <Button variant="outline">Review Plan</Button>
    <Button variant="primary">Confirm Payment</Button>
  </DialogFooter>
</Dialog>
```

**Design Principles:**
- Strong visual emphasis
- Comprehensive consequence explanation
- Benefits and costs clearly stated
- Multiple consideration points

**Real-world Examples:**
- Financial transactions
- Subscription changes
- Data exports
- Security settings

### Critical Trust: Maximum Protection
**Psychology**: Permanent consequences requiring absolute certainty
**Implementation**: Maximum friction, progressive confirmation

```tsx
// Account Deletion Dialog - Critical Trust
<Dialog trustLevel="critical" destructive size="lg">
  <DialogTitle>Delete Account Forever</DialogTitle>
  <DialogDescription>
    This action cannot be undone. This will permanently delete your account,
    all your data, and cancel any active subscriptions.
  </DialogDescription>
  
  <div className="space-y-4">
    <div className="bg-destructive/10 border border-destructive/20 p-4 rounded">
      <strong>⚠️ What will be permanently deleted:</strong>
      <ul className="mt-2 space-y-1">
        <li>• All projects and files</li>
        <li>• Version history and backups</li>
        <li>• Team memberships and permissions</li>
        <li>• Billing history and invoices</li>
      </ul>
    </div>
    
    <div>
      <Label>Type "delete my account" to confirm:</Label>
      <Input placeholder="delete my account" />
    </div>
  </div>
  
  <DialogFooter>
    <Button variant="outline">Keep My Account Safe</Button>
    <Button variant="destructive" disabled>Delete Forever</Button>
  </DialogFooter>
</Dialog>
```

**Design Principles:**
- Maximum visual weight and urgency
- Progressive confirmation (type-to-confirm)
- Comprehensive consequence listing
- Strong emotional language ("Forever", "Cannot be undone")
- Multiple escape routes

**Real-world Examples:**
- Account deletion
- Data destruction
- Security breaches responses
- Permanent configuration changes

## Implementation Patterns

### Progressive Confirmation
For critical actions, implement multi-step confirmation:

1. **Initial Warning** - Clear consequence statement
2. **Detailed Explanation** - Comprehensive impact listing  
3. **Type-to-Confirm** - Active engagement requirement
4. **Final Confirmation** - Last chance with strong language

```tsx
// Progressive confirmation implementation
const [confirmText, setConfirmText] = useState('');
const isConfirmed = confirmText === 'delete my account';

<DialogFooter>
  <Button variant="outline">Keep Account</Button>
  <Button 
    variant="destructive" 
    disabled={!isConfirmed}
    onClick={handleDelete}
  >
    {isConfirmed ? 'Delete Forever' : 'Type to Enable'}
  </Button>
</DialogFooter>
```

### Attention Hierarchy
Visual weight should match consequence severity:

```tsx
// Button hierarchy by consequence
<div className="space-y-2">
  <Button variant="ghost" size="sm">Cancel</Button>        // Escape
  <Button variant="outline">Save Draft</Button>           // Alternative  
  <Button variant="primary">Continue</Button>             // Primary
  <Button variant="destructive">Delete</Button>           // Destructive
</div>
```

### Cognitive Load Management
Reduce mental overhead through clear information architecture:

```tsx
// Complex dialog with cognitive load optimization
<Dialog cognitiveComplexity="complex" size="xl">
  <DialogHeader>
    <DialogTitle>Export Project Data</DialogTitle>
    <DialogDescription>
      This may take several minutes depending on data size.
    </DialogDescription>
  </DialogHeader>
  
  {/* Organized sections reduce cognitive load */}
  <div className="space-y-6">
    <section>
      <h4>Export Format</h4>
      <RadioGroup options={formatOptions} />
    </section>
    
    <section>
      <h4>Include Data</h4>
      <CheckboxGroup options={dataOptions} />
    </section>
    
    <section>
      <h4>Estimated Size</h4>
      <div className="text-sm text-muted-foreground">
        Approximately 2.3 GB based on your selections
      </div>
    </section>
  </div>
</Dialog>
```

## Trust-Building Micro-Interactions

### Loading States
Show progress and maintain user confidence:

```tsx
// Trust-building loading state
<Button loading aria-busy="true">
  {loading ? 'Processing Payment...' : 'Confirm Payment'}
</Button>
```

### Success Confirmation
Positive reinforcement after critical actions:

```tsx
// Post-action confirmation
<Dialog trustLevel="low" size="sm">
  <DialogContent className="text-center">
    <div className="text-success text-2xl mb-2">✓</div>
    <DialogTitle>Account Deleted Successfully</DialogTitle>
    <DialogDescription>
      Your account and all data have been permanently removed.
      You will receive a confirmation email shortly.
    </DialogDescription>
  </DialogContent>
</Dialog>
```

### Error Recovery
Help users recover from mistakes with dignity:

```tsx
// Error recovery with clear next steps
<Dialog trustLevel="medium" size="md">
  <DialogTitle>Payment Failed</DialogTitle>
  <DialogDescription>
    Your card was declined. This is usually due to insufficient funds
    or an expired card.
  </DialogDescription>
  
  <div className="space-y-3">
    <Button variant="primary">Try Different Card</Button>
    <Button variant="outline">Update Payment Method</Button>
    <Button variant="ghost">Contact Support</Button>
  </div>
</Dialog>
```

## Accessibility and Trust

### Screen Reader Trust Communication
Enhance trust for assistive technology users:

```tsx
<Button 
  variant="destructive"
  aria-label="Delete account permanently - this action cannot be undone"
  aria-describedby="deletion-warning"
>
  Delete Account
</Button>
<div id="deletion-warning" className="sr-only">
  Warning: Account deletion is permanent and will remove all your data
</div>
```

### Keyboard Navigation Trust
Ensure keyboard users feel secure:

```tsx
// Proper focus management for trust
<Dialog onOpenChange={setOpen}>
  <DialogContent 
    onEscapeKeyDown={handleCancel}  // Clear escape route
    onFocusOutside={handleCancel}   // Safe dismissal
  >
    {/* Focus automatically managed */}
  </DialogContent>
</Dialog>
```

## Measuring Trust

### Key Metrics
- **Task Completion Rate** - Users finishing critical actions
- **Error Recovery Rate** - Successfully recovering from mistakes  
- **Decision Confidence** - Post-action satisfaction scores
- **Abandonment Rate** - Users leaving mid-critical-action

### Trust Validation Questions
- Does this feel safe?
- Am I confident about what will happen?
- Can I easily undo or escape?
- Do I understand the consequences?
- Does the visual weight match the importance?

---

**Remember:** Trust is earned through consistent, predictable, and respectful interactions. Every component should ask: "How can I help the user feel more confident about their decision?"