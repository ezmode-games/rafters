---
/**
 * ComponentCard - Grid card for component index
 * Shows component preview with cognitive load indicator
 */

import type { ComponentMetadata } from '../../lib/types';

interface Props {
  component: ComponentMetadata;
  class?: string;
}

const { component, class: className = '' } = Astro.props;

// Get cognitive load color class
function getLoadClass(score: number): string {
  if (score <= 3) return 'text-success border-success';
  if (score <= 6) return 'text-warning border-warning';
  return 'text-destructive border-destructive';
}
---

<a
  href={`/components/${component.name}`}
  class={`group relative flex flex-col gap-3 p-4 bg-card border border-border no-underline transition-all hover:border-primary hover:shadow-lg hover:-translate-y-0.5 ${className}`}
>
  <div class="flex justify-between items-center">
    <span class="font-mono text-xs tracking-widest uppercase text-muted-foreground/50">
      {component.category}
    </span>
    <span
      class={`flex items-center justify-center w-5 h-5 font-mono text-xs font-medium border ${getLoadClass(component.intelligence.cognitiveLoad.score)}`}
      title={`Cognitive Load: ${component.intelligence.cognitiveLoad.score}/10`}
    >
      {component.intelligence.cognitiveLoad.score}
    </span>
  </div>

  <h3 class="font-mono text-sm font-medium tracking-wider text-foreground m-0">
    {component.displayName}
  </h3>

  <p class="text-xs leading-relaxed text-muted-foreground m-0 flex-1 line-clamp-2">
    {component.description || component.intelligence.cognitiveLoad.description}
  </p>

  <div class="flex gap-4">
    {component.variants.length > 1 && (
      <span class="flex items-center gap-1 font-mono text-xs tracking-wider uppercase">
        <span class="text-muted-foreground/50">Variants</span>
        <span class="text-primary">{component.variants.length}</span>
      </span>
    )}
    {component.sizes.length > 1 && (
      <span class="flex items-center gap-1 font-mono text-xs tracking-wider uppercase">
        <span class="text-muted-foreground/50">Sizes</span>
        <span class="text-primary">{component.sizes.length}</span>
      </span>
    )}
  </div>

  <div class="absolute right-4 bottom-4 w-4 h-4 text-primary opacity-0 -translate-x-1 transition-all group-hover:opacity-100 group-hover:translate-x-0" aria-hidden="true">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M5 12h14M12 5l7 7-7 7" />
    </svg>
  </div>
</a>
