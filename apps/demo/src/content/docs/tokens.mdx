---
title: Design Tokens
description: A dependency-aware token system that tracks human decisions.
order: 1
section: tokens
teaches:
  - token-dependencies
  - human-overrides
  - generation-rules
---

Design tokens are the atomic values of a design system - colors, spacing, typography, shadows. Most token systems treat these as flat key-value pairs. Rafters treats them as a dependency graph.

## Why Dependencies Matter

Consider a spacing system. The base unit is 4px. From this, you derive:

- `spacing-xs`: 4px (base)
- `spacing-sm`: 8px (base * 2)
- `spacing-md`: 16px (base * 4)
- `spacing-lg`: 32px (base * 8)

In a flat system, changing the base means updating every derived value manually. In Rafters, you change the base and the graph recalculates downstream values automatically.

But here is where it gets interesting.

## Human Overrides

Sometimes the math is wrong. A designer looks at `spacing-lg` and decides 32px feels too cramped for card padding. They override it to 40px.

Most systems would either:
1. Lose this decision when regenerating
2. Prevent regeneration entirely to preserve it

Rafters does neither. It tracks the override:

```typescript
{
  name: 'spacing-lg',
  value: '40px',           // Human's choice
  computedValue: '32px',   // What math says
  userOverride: {
    reason: 'Card padding needs breathing room',
    overriddenBy: 'sarah@company.com',
    overriddenAt: '2024-01-15T10:30:00Z',
    context: 'Used in CardContainer, Modal'
  }
}
```

When the system regenerates, it updates `computedValue` but preserves `value`. The AI sees both: what the math produces and what the human decided. It learns that this designer values breathing room over mathematical purity.

## Generation Rules

Tokens can define how they are computed from other tokens:

- `calc({spacing-base} * 4)` - Mathematical relationship
- `scale:600` - Extract position from a color scale  
- `contrast:auto` - Compute accessible contrast pairing
- `state:hover` - Derive hover state from base
- `invert` - Flip lightness for dark mode

These rules create explicit relationships that the AI can trace and understand.

## What This Enables

An AI agent querying the token system sees:
- The values it should use
- Where those values come from
- Which values a human deliberately changed (and why)
- How changing one value affects others

This is not just a style guide. It is a map of design decisions with provenance.
