---
interface Props {
  name: string;
}

const { name } = Astro.props;
const command = `npx rafters add ${name}`;
---

<div class="bg-gray-900 rounded-md overflow-hidden my-6 border border-gray-800">
  <div class="px-4 py-2 bg-gray-800/50 border-b border-gray-800">
    <span class="font-mono text-xs font-medium uppercase tracking-wider text-gray-500">
      Installation
    </span>
  </div>
  <div class="flex items-center justify-between p-4 gap-4">
    <code class="font-mono text-sm text-green-500 flex-1">{command}</code>
    <button
      class="p-2 bg-transparent border border-gray-700 rounded text-gray-500 hover:text-white hover:border-gray-500 transition-colors cursor-pointer flex items-center justify-center copy-btn"
      data-command={command}
      aria-label="Copy to clipboard"
    >
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
        <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
      </svg>
    </button>
  </div>
</div>

<script>
  document.querySelectorAll('.copy-btn').forEach(btn => {
    btn.addEventListener('click', async () => {
      const command = btn.getAttribute('data-command');
      if (command) {
        await navigator.clipboard.writeText(command);
        btn.classList.add('text-green-500', 'border-green-500');
        btn.classList.remove('text-gray-500', 'border-gray-700');
        setTimeout(() => {
          btn.classList.remove('text-green-500', 'border-green-500');
          btn.classList.add('text-gray-500', 'border-gray-700');
        }, 2000);
      }
    });
  });
</script>
